import{_ as U,o as u,c as h,a as l,t as M,n as p,b as y,r,d as k,e as A,w as F,F as N,f as z,l as V,g as j,h as O,i as Y,j as g,k as I}from"./index-tn8pRQRT.js";import{a as G}from"./axios-CCb-kr4I.js";import{u as H}from"./wishlist-BbBJjh0E.js";import{g as J,a as P,b as Q,f as Z}from"./URL-DyqB0Dbf.js";const $={name:"BannerComponent",props:{movie:{type:Object,required:!0}},computed:{backdropUrl(){return console.log(this.movie),this.movie?`https://image.tmdb.org/t/p/original${this.movie.backdrop_path}`:""}}},ee={class:"banner-content"};function te(i,t,a,e,s,c){return a.movie?(u(),h("div",{key:0,class:"banner",style:p({backgroundImage:`url(${c.backdropUrl})`})},[l("div",ee,[l("h1",null,M(a.movie.title),1),l("p",null,M(a.movie.overview),1),t[0]||(t[0]=l("button",{class:"play-btn title-btn"},"재생",-1)),t[1]||(t[1]=l("button",{class:"info-btn title-btn"},"상세 정보",-1))])],4)):y("",!0)}const oe=U($,[["render",te],["__scopeId","data-v-4241ddb4"]]),ne={name:"MovieRow",props:{title:{type:String,required:!0},fetchUrl:{type:String,required:!0}},setup(i){const t=r([]),a=r(null),e=r(null),s=r(0),c=r(!1),o=r(!1),d=r(0),b=r(0),{wishlist:ge,toggleWishlist:E,isInWishlist:L}=H(),S=()=>a.value&&e.value?Math.max(0,a.value.scrollWidth-e.value.clientWidth):0,v=r(S()),T=k(()=>s.value<=0),W=k(()=>s.value>=v.value),R=async()=>{try{const n=await G.get(i.fetchUrl);t.value=n.data.results,console.log(t)}catch(n){console.error("Error fetching movies:",n)}},x=n=>`https://image.tmdb.org/t/p/w300${n}`,w=(n,m=null)=>{const f=m||e.value.clientWidth*.8;n==="left"?s.value=Math.max(0,s.value-f):s.value=Math.min(v.value,s.value+f)},B=()=>{c.value=!0},C=()=>{c.value=!1},D=n=>{if(n.preventDefault(),o.value)return;o.value=!0;const m=n.deltaY>0?"right":"left";w(m),setTimeout(()=>{o.value=!1},500)},K=n=>{d.value=n.touches[0].clientX,b.value=n.touches[0].clientX},X=n=>{b.value=n.touches[0].clientX},q=()=>{const n=d.value-b.value;if(Math.abs(n)>50){const f=n>0?"right":"left";w(f,Math.abs(n))}},_=()=>{v.value=S(),s.value=Math.min(s.value,v.value)};return A(()=>{R(),window.addEventListener("resize",_),_()}),F(t,()=>{setTimeout(_,0)}),{movies:t,slider:a,sliderWindow:e,scrollAmount:s,maxScroll:v,atLeftEdge:T,atRightEdge:W,showButtons:c,getImageUrl:x,slide:w,handleMouseMove:B,handleMouseLeave:C,handleWheel:D,handleTouchStart:K,handleTouchMove:X,handleTouchEnd:q,toggleWishlist:E,isInWishlist:L}}},se={class:"movie-row"},le=["disabled"],ae={class:"slider-window",ref:"sliderWindow"},ie=["onClick"],re=["src","alt"],ce={key:0,class:"wishlist-indicator"},de=["disabled"];function ue(i,t,a,e,s,c){return u(),h("div",se,[l("h2",null,M(a.title),1),l("div",{class:"slider-container",onWheel:t[2]||(t[2]=(...o)=>e.handleWheel&&e.handleWheel(...o)),onTouchstart:t[3]||(t[3]=(...o)=>e.handleTouchStart&&e.handleTouchStart(...o)),onTouchmove:t[4]||(t[4]=(...o)=>e.handleTouchMove&&e.handleTouchMove(...o)),onTouchend:t[5]||(t[5]=(...o)=>e.handleTouchEnd&&e.handleTouchEnd(...o)),onMousemove:t[6]||(t[6]=(...o)=>e.handleMouseMove&&e.handleMouseMove(...o)),onMouseleave:t[7]||(t[7]=(...o)=>e.handleMouseLeave&&e.handleMouseLeave(...o))},[l("button",{class:"slider-button left",onClick:t[0]||(t[0]=o=>e.slide("left")),style:p({opacity:e.showButtons&&!e.atLeftEdge?1:0}),disabled:e.atLeftEdge},"<",12,le),l("div",ae,[l("div",{class:"movie-slider",ref:"slider",style:p({transform:`translateX(${-e.scrollAmount}px)`})},[(u(!0),h(N,null,z(e.movies,o=>(u(),h("div",{key:o.id,class:"movie-card",onClick:d=>e.toggleWishlist(o)},[l("img",{src:e.getImageUrl(o.poster_path),alt:o.title},null,8,re),e.isInWishlist(o.id)?(u(),h("div",ce,"👍")):y("",!0)],8,ie))),128))],4)],512),l("button",{class:"slider-button right",onClick:t[1]||(t[1]=o=>e.slide("right")),style:p({opacity:e.showButtons&&!e.atRightEdge?1:0}),disabled:e.atRightEdge},">",12,de)],32)])}const he=U(ne,[["render",ue],["__scopeId","data-v-321b45fe"]]);V.add(j,O);const ve={name:"Home",components:{BannerComponent:oe,MovieRow:he,FontAwesomeIcon:Y},data(){return{apiKey:localStorage.getItem("TMDb-Key")||"",featuredMovie:null,popularMoviesUrl:"",newReleasesUrl:"",actionMoviesUrl:"",userInfo:JSON.parse(localStorage.getItem("kakaoUserInfo")||"{}")}},created(){this.popularMoviesUrl=J(this.apiKey),this.newReleasesUrl=P(this.apiKey),this.actionMoviesUrl=Q(this.apiKey,"28"),Z(this.apiKey).then(i=>{this.featuredMovie=i})},methods:{handleScroll(){const i=document.querySelector(".app-header");window.scrollY>50?i.classList.add("scrolled"):i.classList.remove("scrolled")}},mounted(){window.addEventListener("scroll",this.handleScroll),setInterval(()=>{},1e3)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)}},me={key:0};function fe(i,t,a,e,s,c){const o=I("BannerComponent"),d=I("movie-row");return u(),h("div",null,[s.userInfo.nickname?(u(),h("div",me,[l("h2",null,"안녕하세요, "+M(s.userInfo.nickname)+"님",1)])):y("",!0),g(o,{movie:s.featuredMovie},null,8,["movie"]),g(d,{title:"인기 영화",fetchUrl:s.popularMoviesUrl},null,8,["fetchUrl"]),g(d,{title:"최신 영화",fetchUrl:s.newReleasesUrl},null,8,["fetchUrl"]),g(d,{title:"액션 영화",fetchUrl:s.actionMoviesUrl},null,8,["fetchUrl"])])}const _e=U(ve,[["render",fe],["__scopeId","data-v-6544bb87"]]);export{_e as default};
